<% layout('simulador_layout') %>

<div class="contador-pistas">
  <span class="contador-label">Pistas encontradas</span>
  <span id="contador-texto" class="contador-valor">0/8</span>
</div>

<!-- TOOLTIP INTERACTIVO GLOBAL -->
<div id="tooltip-pista" class="tooltip-ventana oculto">
    <div class="tooltip-pregunta"></div>

    <div class="tooltip-botones">
        <button class="tooltip-btn btn-si">Sí</button>
        <button class="tooltip-btn btn-no">No</button>
    </div>

    <div class="tooltip-feedback oculto"></div>

    <button class="tooltip-cerrar">Cerrar</button>
</div>

<!-- MONITOR SIMULADO (ÁREA INTERACTIVA) -->
<div id="contenido-mvp">

    <button id="btn-ver-tutorial" class="btn-tutorial-hud" title="Repasar instrucciones">
    <i class="fa-solid fa-circle-info"></i> VER MISIÓN
</button>

<div id="tutorial-overlay" class="tutorial-overlay">
    <div class="tutorial-card">
        
        <h2 class="tutorial-titulo">
            <i class="fa-solid fa-user-secret"></i> Misión: Detectar el Fraude
        </h2>

        <p class="tutorial-intro">
            Agente, hemos interceptado un correo sospechoso de fraude.<br>
            Tu objetivo es analizarlo antes de que cause daños.
        </p>

        <div class="tutorial-steps-grid">
            
            <div class="tutorial-bloque">
                <h3><i class="fa-solid fa-magnifying-glass"></i> 1. Explora con la Lupa</h3>
                <p>Tu mouse es la lupa. Pásalo por textos, logos y enlaces para revelar detalles ocultos.</p>
            </div>

            <div class="tutorial-bloque">
                <h3><i class="fa-regular fa-clock"></i> 2. Detecta</h3>
                <p>Mantén la lupa <strong>quieta</strong> sobre un elemento sospechoso para analizarlo.</p>
            </div>

            <div class="tutorial-bloque">
                <h3><i class="fa-solid fa-gavel"></i> 3. Decide</h3>
                <p>El sistema te preguntará si lo consideras un riesgo o no. Confía en tu instinto y responde.</p>
            </div>

            <div class="tutorial-bloque">
                <h3><i class="fa-solid fa-list-check"></i> 4. Completa la Misión</h3>
                <p>Intenta encontrar las <strong>8 pistas</strong> del contador. Si no puedes más, presiona <strong>"Terminar Análisis"</strong> cuando quieras.</p>
            </div>

        </div>

        <div class="tutorial-acciones">
            <button id="btn-cerrar-tutorial" class="btn-comenzar-mision">
                ENTENDIDO, INICIAR ANÁLISIS <i class="fa-solid fa-arrow-right"></i>
            </button>
        </div>

        

    </div>
</div>

    

    <div class="correo">

        <!-- ===== META (ASUNTO + REMITENTE) ===== -->
        <div class="correo-meta">

            <div class="correo-asunto">
                <span class="sospechoso"
                    data-id="asunto"
                    data-feedback-si="¡Correcto! Los asuntos que transmiten urgencia o amenazas suelen ser indicativos de correos fraudulentos."
                    data-feedback-no="En realidad este asunto sí es sospechoso porque los bancos no usan mensajes alarmantes.">
                    ALERTA URGENTE: Bloqueo Preventivo de su Cuenta
                </span>
            </div>

            <div class="correo-remitente">
                BancoEstado
                <span class="correo-remitente-mail sospechoso"
                    data-id="remitente"
                    data-feedback-si="¡Correcto! El dominio del remitente no corresponde a un sitio oficial del banco."
                    data-feedback-no="Este remitente es sospechoso. Los bancos no usan correos desde dominios como publimailer.cl, solo de su sitio oficial.">
                    &lt;bancoestado@publimailer.cl&gt;
                </span>
            </div>

        </div>

        <!-- ===== LOGO + SOPORTE ===== -->
        <div class="correo-alineacion">

            <div class="correo-logo-block">
                <img src="/images/LogoBancoEstado.avif" alt="BancoEstado" class="correo-logo" />
                <span class="correo-logo-text">BancoEstado</span>
            </div>

            <div class="correo-soporte">
                <span>Ayuda Soporte </span>
                <span class="correo-soporte-num sospechoso" 
                    data-pos="left"
                    data-id="soporte"
                    data-feedback-si="¡Correcto! Los números de soporte que no coinciden con los oficiales del banco son sospechosos."
                    data-feedback-no="Este número es sospechoso. Los bancos no usan números como este para soporte.">
                    +569 5134590
                </span>
            </div>

        </div>

        <!-- ===== SALUDO GENÉRICO ===== -->
        <p>
            <span class="sospechoso"
                data-id="saludo"
                data-feedback-si="¡Correcto! Los bancos oficiales suelen dirigirse por tu nombre y no con saludos genéricos como 'Estimado cliente'."
                data-feedback-no="En realidad, los bancos oficiales suelen dirigirse por tu nombre y no con saludos genéricos como 'Estimado cliente'.">
                Estimado cliente,
            </span>
        </p>

        <!-- ===== TEXTO NO SOSPECHOSO ===== -->
        <p>
            Hemos detectado un intento de inicio de sesión inusual en su banca en línea desde un dispositivo no reconocido.
        </p>


        <!-- ===== ORTOGRAFÍA + URGENCIA ===== -->
        <p>
            Para evitar la <strong>
                <span class="sospechoso"
                    data-id="ortografia"
                    data-feedback-si="¡Correcto! Las faltas de ortografía suelen ser indicativos de fraudes."
                    data-feedback-no="Los correos oficiales están correctamente escritos, no tienen faltas de ortografía.">
                    suspención
                </span> definitiva
            </strong>
            de sus servicios,
            <span class="sospechoso"
                data-id="urgencia"
                data-feedback-si="¡Correcto! Los correos que solicitan acciones urgentes suelen ser fraudulentos."
                data-feedback-no="Este mensaje es sospechoso. Los correos oficiales no suelen pedir acciones urgentes.">
                verifique su identidad dentro de las próximas <strong>24 horas</strong>.
            </span>
        </p>

        <!-- ===== BOTÓN SOSPECHOSO ===== -->
        <p>
            Por favor haga clic en el siguiente botón seguro y complete el proceso de verificación:
        </p>

        <div class="correo-boton">
            <a class="btn-alerta sospechoso"
                data-id="boton"
                data-feedback-si="¡Correcto! Los bancos nunca piden verificar la cuenta desde un botón en un correo. La única forma segura es ingresar manualmente al sitio oficial."
                data-feedback-no="Este botón es sospechoso. Los bancos no utilizan enlaces en correos para pedir verificaciones; debes ingresar por tu navegador al sitio oficial.">
                Verificar mi cuenta
            </a>
        </div>

        <!-- ===== RESTO DEL CONTENIDO ===== -->
        <p>Si ya realizó esta verificación, puede ignorar este mensaje.<br>

        Atentamente,<br>Equipo de Seguridad BancoEstado</p>

        <!-- ===== FOOTER ===== -->
        <div class="correo-footer">
            <img src="/images/bancoestado-footer.avif" class="correo-footer-logo" />
        </div>

        <p class="footer-legal">
            <span class="sospechoso" 
                data-pos="footer"
                data-id="footer"
                data-feedback-si="¡Bien visto! Los estafadores a veces copian textos legales en inglés para que parezca un mensaje serio. También verifica el año incorrecto."
                data-feedback-no="Este aviso no es oficial. Un banco real no mezcla idiomas ni usa textos legales genéricos sacados de Internet.">
                Copyright © 2019 BancoState.
            </span>
            Todos los derechos reservados.<br>
        </p>

    </div>

    <!-- LUPA -->
    <img src="/images/lupa.avif" id="lupa-img">
    
    

</div>

<!-- CURSOR MANO -->
<img src="/images/mano.avif" id="mano-img">

<div class="contenedor-finalizar">
    <form id = "form-simulacion" action="/guardar-simulacion" method="POST">
        <input type="hidden" name="userId" value="<%= userId %>">
        <input type="hidden" name="datosSimulacion" id="input-datos-simulacion">
        <button type="button" onclick="finalizarSimulacion()" class="btn-finalizar">Finalizar Entrenamiento</button>
    </form>
</div>
